#!/usr/bin/env ruby
$LOAD_PATH.unshift "lib" if $0 == "bin/c9"

require 'channel9'

debug = ARGV.include?("-d")
ARGV.delete("-d")

stream = Channel9::Stream.from_json(File.read(ARGV[0]))
context = Channel9::Context.new(stream)
environment = Channel9::Environment.new(context, debug)

environment.run